{% extends "default/layout/layout.html" %}
{% load static %}

{% block title %} Change Password {% endblock %}
{% block canonical_url %}{{request.scheme}}://{{request.META.HTTP_HOST}}{{request.path}}{% endblock %}

{% block ld_json %}
{{home_schema|safe}}
{% endblock %}

{% block home_content %}
    <!-- hero area -->
    {% include "default/customer/dashboard/left-menu.html" %}

    <div class="products-catagories-area clearfix">
        <div class="container mt-4 mb-4">
            <main class="ms-sm-auto px-md-4 content">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>Change Password</h2>
                    <div class="p-2 mb-3 bg-light border rounded">
                        <span class="text-primary">{{ user.subscription.get_plan_display}}</span> /
                        <span class="text-danger">{{ user.subscription.get_duration_days_display}}</span> -
                        <span class="text-danger">{{ user.subscription.remaining_days}} Days Remaining</span>
                    </div>
                </div>
            </main>
            <div class="card custom-card">
                <form method="post">
                    {% csrf_token %}
                
                    <!-- Old Password -->
                    <div class="mb-3">
                        <label class="form-label">Current Password</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white"><i class="fa fa-lock"></i></span>
                            <input type="password" name="old_password" class="form-control" id="oldPassword" placeholder="Enter current password" required>
                            <span class="input-group-text bg-white">
                                <i class="fa fa-eye toggle-password" data-target="oldPassword"></i>
                            </span>
                        </div>
                    </div>
                
                    <!-- New Password -->
                    <div class="mb-3">
                        <label class="form-label">New Password</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white"><i class="fa fa-lock"></i></span>
                            <input type="password" name="new_password1" class="form-control" id="newPassword" placeholder="Enter new password" required>
                            <span class="input-group-text bg-white">
                                <i class="fa fa-eye toggle-password" data-target="newPassword"></i>
                            </span>
                        </div>
                    </div>
                
                    <!-- Confirm New Password -->
                    <div class="mb-3">
                        <label class="form-label">Confirm New Password</label>
                        <div class="input-group">
                            <span class="input-group-text bg-white"><i class="fa fa-lock"></i></span>
                            <input type="password" name="new_password2" class="form-control" id="confirmPassword" placeholder="Confirm new password" required>
                            <span class="input-group-text bg-white">
                                <i class="fa fa-eye toggle-password" data-target="confirmPassword"></i>
                            </span>
                        </div>
                    </div>
                
                    <button type="submit" class="btn btn-danger w-100">Update Password</button>
                </form>  
            </div>
        </div>
    </div>
    <!-- hero area end -->
{% endblock home_content %}
{% block extrastyle %}
{% endblock extrastyle %}

{% block extrajs %}
<!-- Password Toggle Script -->
<script>
    document.querySelectorAll(".toggle-password").forEach(item => {
        item.addEventListener("click", function () {
            let target = document.getElementById(this.getAttribute("data-target"));
            if (target.type === "password") {
                target.type = "text";
                this.classList.remove("fa-eye");
                this.classList.add("fa-eye-slash");
            } else {
                target.type = "password";
                this.classList.remove("fa-eye-slash");
                this.classList.add("fa-eye");
            }
        });
    });
</script>
{% endblock extrajs %}